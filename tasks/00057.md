# Украшательства и веб-интерфейс
В поставке Go есть полноценная библиотека для работы с [html шаблонами](http://golang.org/pkg/html/template/), но мы будем делать так называемое одностраничное приложение, работающее напрямую с API через javascript. Поможет нам в этом [AngularJS](http://angularjs.org/).

Обновляем код для нового шага:
```bash
> git checkout step-5
```
Как было упомянуто ещё в первой главе, в Martini есть хендлер для раздачи статики, по умолчанию он раздаёт статические файлы из директории public. Положим туда нужные там js и css библиотеки. Описывать работу фронтенда я буду, так как это не является целью нашей статьи, вы можете самостоятельно посмотреть в исходные файлы, для людей, знакомых с angular, там всё достаточно просто.

Для вывода главной страницы мы добавим отдельный обработчик:
```go
	api.Get("**", func(r render.Render){
			r.HTML(200, "index", nil)
		})
```
Glob символы ** говорят, что для любого адреса будет выдаваться файл index.html. Для правильной работы с шаблонами мы добавили при создании Renderer опции, указывающие откуда брать шаблоны. Плюс, чтобы не было конфликтов с angular шаблонами, переназначили {{ }} на {[{ }]}.
```go
	api.Use(render.Renderer(render.Options{
		Directory: "public/static/views",
		Extensions: []string{".html"},
		Delims: render.Delims{"{[{", "}]}"},
	}))
```
Помимо этого, в модель Bin были добавлены поля Сolor (три байта, хранящие RGB значение цвета) и Favicon (data uri картинка, нужно цвета), генерируемые случайным образом при создании объекта, чтобы различать разные bin объекты по цветам.
```go
type Bin struct {
...
	Color		 [3]byte `json:"color"`
	Favicon      string  `json:"favicon"`
}

func NewBin() *Bin {
	color:= RandomColor()
	bin := Bin{
...
		Color:		  color,
		Favicon:      Solid16x16gifDatauri(color),
	}
...
}
```
Теперь у нас почти полнофункциональное веб-приложение, можно его запустить:
```bash
> go run ./src/main.go
```
И открыть в браузере (127.0.0.1:3000), чтобы поиграться.

К сожалению, пока ещё у приложения существуют две проблемы: после завершения работы программы все данные теряются и у нас нет никакого разделения по пользователям, все видят одно и тоже. Чтож, займёмся этим.
