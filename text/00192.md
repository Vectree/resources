## Циклы

Представьте ситуацию: к вам приходит глава отдела разработки и просит вывести 1000 раз "ERROR". Хочет и все! 

Это безумие - скажете вы. Ведь придется 1000 раз писать System.out.println. Что делать?

К счастью, в Java есть множество управляющих конструкций, которые решат данную проблему. Эти управляющие конструкции - циклы. 
Циклы решают множество задач, включая сортировку, вывод, фильтрацию данных и являются важнейшим инструментом в руках разработчика.

В данном уроке мы рассмотрим следующие виды циклов:

1. for
2. while
3. do while

### for

Цикл `for` предоставляет простой способ перебора диапазона значений.
Стандартный оператор `for` состоит из трех частей: инициализации, условия и приращения.

```java
for (инициализации; условие; приращение)
{
    // тело цикла - ваш повторяющийся код
}
```

* `инициализация` - инициализирует цикл и "счетчики". Выполняется только один раз, в начале;
  > Вы можете инициализировать более одной переменной одного типа. Каждая инициализация должна быть разделена запятой.
* `условие` - вычисляется в начале каждой итерации (шага) цикла. Если `условие` имеет значение `true`, будет выполняться код внутри `{ }`;
* `приращение` - вызывается после каждой итерации (шага) цикла. Тут вы можете увеличивать или уменьшать значения переменных. Убедитесь, что приращение приведет к том, что **условие** стане ложным, иначе циклы будет бесконечно выполняться.

![](https://user-images.githubusercontent.com/4215285/70930416-3360c180-2046-11ea-8fe9-05fb76700187.jpeg)

Стандартный пример использования цикла `for` - повтор кода несколько раз. Например, если вы хотите вывести числа от 0 до 10, вы должны:
1. **Инициализировать** переменную вашего счетчика нулем;
2. В **условии** проверять, что значение счетчика меньше 10; 
3. Добавлять (**приращать**) единицу к счетчику после каждой итерации.

Обратите внимание, что в условии стоит оператор `<`, а не `<=`, так как счетчик стартует с 0.

```java
int i;

for (i = 0; i < 10; i++)
{
    System.out.print(i + " ");
    // данный код повторяется 10 раз, i равен сначала 0, потом 1,2...9
}

System.out.println ("Результат: " + i); // Выведет: "Результат: 0 1 2 3 4 5 6 7 8 9"
```

> i++ эквивалентно i = i + 1.

1. `i = 0` - на старте работы цикла задаем счетчику `i` значение 0;
2. `i < 10` - затем в начале каждого шага цикла проверяем, что счетчик меньше 10. Если `i < 10` выполняем код дальше;
3. `i++` - В конце шага увеличиваем счетчик на единицу;

Как только счетчик i станет равен 10, цикл закончит свою работу.

**Примечание**: вы можете объявить переменную в цикле for.

```java
for (int i = 0; i < 10; i++)
{
    System.out.print(i + " ");
    // данный код повторяется 10 раз, i равен сначала 0, потом 1,2...9
}
```

Результат:
```
0 1 2 3 4 5 6 7 8 9
```

Вот еще один пример, который складывает числа от 1 до 50. 

```java
int addUntil = 50; // складываем числа до 50
int sum = 0; // в этой переменной хранится сумма

// складываем от 1 до 50.
for (int i = 1; i <= addUntil; i++) 
{
    sum += i; // прибавляем к переменной sum единицу
}

System.out.println("Сумма первых 50 чисел: " + sum);
```

#### Дополнительно

Вы не можете использовать в условии число (в стиле C) или что-либо, не являющееся логическим значением в итоге. Вы не можете, например, выполнить **условие** `if (x)`, если `x` не является boolean.

Также важно не забыть, что **условие** должно в какой-то момент принять значение `true`. В противном случае ваша программа застрянет в бесконечном цикле.

### while

Цикл `while` повторяет код до тех пор, пока **условие**, не станет равным `false`. Например:

```java
while (условие)
{
    // тело цикла - повторяющийся код
}
```

> Житейский пример: вам необходимо увеличить громкость телевизора до 50, нажимая кнопку +. Решение можно описать так: 
> пока текущее значение меньше 50, нажимаем на кнпоку +.

![](https://user-images.githubusercontent.com/4215285/70930417-33f95800-2046-11ea-8c8f-137fad8652a6.jpeg)

Каждой итерации цикла предшествует проверка условия, указанного в скобках. Код в фигурных скобказ выполняется, только если **условие** равно истине - `true`. Если значение равно `false`, выполнение программы продолжается сразу после блока while.

**Примечание**: чтобы цикл `while` начал выполняться, вам необходимо, чтобы **условие** изначально было `true`. 
Однако, чтобы выйти из цикла, вы должны изменить значение условия на `false` с помощью кода внутри тела цикла (определяется фигурными скобками). В противном случае цикл будет выполняться вечно.

#### Пример

В следующем примере **условие** представлено как `i < 10`. Мы увеличиваем значение `i` на 1 каждый раз, когда выполняется тело цикла. Цикл `while` прерывается, когда счетчик `i` достигает значения `10`.

```java
int i = 0;
while (i < 10)
{
    System.out.print(i + " ");
    i++; // увеличиваем счетчик на 1
}
System.out.println ("Значение счетчика:" + i);
```

Вывод:
```
0 1 2 3 4 5 6 7 8 9
Значение счетчика: 10
```

### do while

`do while` аналогичен циклу `while`, но итерация цикла гарантированно выполняется хотя бы один раз перед проверкой на заданное **условие**.
То есть цикл `while` является циклом с предусловием (тело цикла не обязательно будет выполнено), `do while` является циклом с постусловием (тело цикла будет выполнено по крайней мере один раз, даже если условие равно `false`).

![](https://user-images.githubusercontent.com/4215285/70930418-33f95800-2046-11ea-8e53-11aa9d315230.jpeg)

```java
do
{
    // тело цикла - ваш повторяющийся код
}
while (условие);
```

#### Пример

```java
int i = 20;
do
{
    System.out.print(i + " ");

    // увеличиваем счетчик
    i++;
}
while (i < 10);
System.out.println("Значение счетчика: " + i);
```

Вывод:
```
    20
    Значение счетчика: 21
```

**Помните**: условие цикла `do-while` проверяется только после однократного выполнения тела цикла.

#### Упражнение

Что выведет следующий фрагмент кода?

```java
int i = 10;
do
{
    System.out.println("Значение счетчика i: " + i);
    i--;
}
while (i >= 10);
```

### Бесконечный цикл

Бывают ситуации, когда вам необходимо выполнять одно и то же действие постоянно (например, выводить состояние техники раз в минуту). Для этого нужно создать бесконечный цикл с помощью стандартных операторов цикла (`for`,` while`, `do-while`).

Как мы уже поняли **условие** цикла решает, будет ли выполнен следующий шаг цикла или нет. Поэтому для создания бесконечного цикла достаточно установить значение условия в `true`. 

Пример:

```java
// бесконечный цикл for
for ( ; ; )
{
    // ваш код
}

// бесконечный цикл while
while (true)
{
    // ваш код
}

// бесконечный цикл do while
do
{
    // ваш код
} while (true);
```

Обычно, если вы получили бесконечный цикл в коде, то это ошибка, которая не должна возникать. Ведь в большинстве случаев бесконечный цикл не позволяет запустить остальную часть программы.

```java
for (int i = 0; i < 100; i++)
{
    if (i == 49) 
    {
        i = 0;
    }
}
```

Цикл выше - бесконечный цикл, потому что каждый раз, когда он приближается к 49, счетчик становится равным 0. Это значит, что цикл никогда не достигнет 100.

Программа, застрявшая в таком цикле, будет бесконечно использовать ресурсы компьютера и может привести к "run-time error".

Часто бесконечный цикл используют для того, чтобы закончить выполнение цикла в середине с помощью `break` (о нем поговорим позже), а не в конце или в начале.

```java
// бесконечный цикл, так как условие всегда true
while (true)
{
    // ваш код
    
    if (conditionToEndLoop == true) 
    {
        break;
    }
    
    // еще код
}
```

> В некоторых случаях бесконечный цикл более читаемый, чем обычный.

### Операторы перехода

Как вы заметили у нас не так много власти над работой цикла. К счастью в Java есть операторы перехода, которые входят в группу операторов _потока управления_. 

Следующие операторы перехода обычно используются с циклами:

* break - завершает работу цикла;
* continue - заставляет цикл перейти к следующему шагу, проигнорировав код после себя.

Рассмотрим пример работы с `break`. В цикле ниже, если мы достигнем 5, цикл прерывается.

```java
for (int i = 0; i < 10; i++)
{
  if (i == 5) 
  { // если счетчик равен 5
    break; // то выходим из цикла
  }

  System.out.print(i + " "); // выводим значения счетчика
}
```

Вывод:
```
0 1 2 3 4
```

Как вы заметили, в консоль вывлись числа от 0 до 4. Так как при значении счетчика равном 5, мы завершаем работу цикла.

Теперь рассмотрим `continue`. В приведенном ниже цикле, если `i` равно 5, цикл перейдет к следующему шагу и пропустит оператор `println` для 5. После цикл будет продолжать работать до 10, пока не остановится.

```java
for(int i = 0; i < 10; i++)
{
  if(i == 5)
  { 
    // если счетчик равен 5
    // пропускаем код ниже continue 
    // и сразу переходим на следующий шаг цикла
    continue;
  }

  System.out.println(i);
}
```

Вывод:
```
    0 1 2 3 4 6 7 8 9
```

Как видите, мы пропустили 5 в выводе.

### break

Поговорим о этих операторах более подробно. Как мы уже говорили `break` завершает работу цикла и начинает выполнение кода, который следует непосредственно за циклом. Если у вас есть вложенные циклы, оператор `break` завершит только цикл, в котором он находится.

```java
// Цикл 1
for (int i = 0; i < 10; i++)
{     
    // Цикл 2
    for (int j = 0; j < 10; j++)
    {
        if (i == 5 && j == 5)
        {
            break; // Завершит цикл 2, но цикл 1 продолжит работать
        }
    }
}
```

Но если вы тоже хотите выйти из внешнего цикла, вы можете использовать метку для выхода:

```java
loop1: // Метка для выхода

// Цикл 1
for (int i = 0; i < 10; i++)
{    
    // Цикл 2
    for (int j = 0; j < 10; j++)
    {         
        if (i == 5 && j == 5)
        {
            break loop1; // Завершит цикл 1, а не 2
        }
    }
}
```

Оператор `break` может быть особенно полезен при поиске элемента в массиве. 
Использование `break` в следующем примере увеличивает эффективность программы, поскольку цикл останавливается, как только будет найден искомый элемент (`searchFor`), вместо того, чтобы проверять весь массив до конца `arrayInts`.

```java
int [] arrayOfInts = {0, 1, 2, 3, 4, 5, 6, 7, 8, 9}; // наш массив, в котором будем искать
int searchFor = 5; // что ищем

// проходим с помощью цикла по всему массиву
for (int i = 0; i < arrayOfInts.length; i++)
{
    // Элемент массива равен элементу, который мы ищем?
    if (arrayOfInts[i] == searchFor)
    {
        // Если да, то выводим индекс и выходим из цикла.
        System.out.println("i = " + i);
        break;
    }
}
```

Оператор `break` можно использовать в цикле `while`.
```java
int [] arrayOfInts = {0, 1, 2, 3, 4, 5, 6, 7, 8, 9}; // наш массив, в котором будем искать
int searchFor = 5; // что ищем
int i = 0; // наш счетчик

while(i < 10)
{
    // Элемент массива равен элементу, который мы ищем?
    if (arrayOfInts[i] == searchFor)
    {
        // Если да, то выводим индекс и выходим из цикла.
        System.out.println("i = " + i);
        break;
    }
    i++; // увеличиваем счетчик
}
```

> Не поняли, как работают массивы? Ничего страшного, мы еще поговорим о массивах в последующем, и вы сможете вернуться и разобраться до конца.
> Пока представьте массив, как коробку, в которую можно положить несколько вещей. В нашем примере мы положили 10 чисел.

### continue

Оператор `continue` начинает новый шаг цикла и пропускает все строки кода после `continue`.

```java
for (int j = 0; j < 10; j++)
{
    if (j == 5)
    {
        continue;
    }
    System.out.print(j + " ");
}
```

Значение `j` будет выводится для каждой итерации, кроме случая, когда `j` равно `5`. То есть вызов `print` будет пропущен из-за `continue`. В результате мы получим вывод:

```
    0 1 2 3 4 6 7 8 9
```

Приведем более интересный пример. Допустим, вы хотите посчитать количество буквы "и" в слове "Миссисипи". И как раз тут вы можете воспользоваться циклом с оператором `continue`:

```java
String searchWord = "Миссисипи";

int max = searchWord.length(); // размер наше строки
int numPs = 0; // результат поиска

for (int i = 0; i < max; i++)
{
    // мы хотим подсчитывать только буквы "и",
    // поэтому пропускаем все, что не является "и"
    if (searchWord.charAt(i) != "и")
    {
        continue;
    }

    // увеличиваем результат поиска
    numPs++;
}

System.out.println("Количество = " + numPs);
```

> Как и с `break`, вы можете использовать метки с `continue`.

### Задание

Изучите дополнительную информацию по циклам:

- [Циклы в Java](https://vertex-academy.com/tutorials/ru/cikly-v-java/);
- [О циклах на javarush](https://javarush.ru/groups/posts/cikly-java);
- [Java для начинающих. Цикл for.](https://www.youtube.com/watch?v=UYbdAmgcNVc);
- [Java для начинающих. Цикл while.](https://www.youtube.com/watch?v=15PjODTSTaw).

Выполните следующие задачи:

1. Посчитайте сумму четных цифр числа `1921648303994914` с помощью цикла `for`;
2. Выведите ряд Фибоначи с помощью цикла `for`. Ряд фибоначи состоит из чисел равных двум предыдущим. При этом начинается ряд с числа `0`, `1`;
   > 0 1 1 2 3 5 8 13 21 ...
3. Выведите квадраты натуральных чисел, которые не привышают числа `411` с помощью цикла `while`.


